<!-- MAP HOME -->
    <script>
    // Fetch Custom Data Faskes
        /*
        fetch('{% url "custom_faskes_api" %}')
        //.then(x=> console.log(x.text))
        .then(response => response.json())
        .then(function(json){
            console.log(json)
            L.geoJSON(json).addTo(map)
        })
        // .then(json => console.log(json))
        */
    // Fetch Standart Data Faskes
        fetch('{% url "standart_faskes_api" %}')
        .then(response => response.json())
        .then(function(json){
            console.log(json)
            const lightData = L.geoJSON(json, {
                onEachFeature: function(feature, Layer) {
                    console.log(feature.properties)
                    // Layer.bindPopup(feature.properties.nama)
                    const popupContent =
                    `
                        <h5 class = "text-primary"> ${feature.properties.nama}</h5>
                        <div class="container">
                            <img src="media/${feature.properties.photo}" width = "290px" height="150px">
                            <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Properti</th>
                                    <th>Keterangan</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Jenis </td>
                                    <td>${feature.properties.jenis}</td>
                                </tr>
                                <tr>
                                    <td>Tingkatan </td>
                                    <td>${feature.properties.tingkatan}</td>
                                </tr>
                                <tr>
                                    <td>Alamat</td>
                                    <td>${feature.properties.alamat}</td>
                                </tr>
                                <tr>
                                    <td>No Telepon</td>
                                    <td>${feature.properties.no_telp}</td>
                                </tr>
                                <tr>
                                    <td>Status</td>
                                    <td>${feature.properties.status}</td>
                                </tr>
                                <tr>
                                    <td>Hari Beroperasi</td>
                                    <td>${feature.properties.hari_beroperasi}</td>
                                </tr>
                                <tr>
                                    <td>Jam Beroperasi</td>
                                    <td>${feature.properties.jam_beroperasi}</td>
                                </tr>
                    `
                    Layer.bindPopup(popupContent);
                },
                pointToLayer: function (feature, latlng) {
                    //return L.circleMarker(latlng, geojsonMarkerIcon);
                    return L.marker(latlng, {icon: hospitalIcon});
                },
            }).addTo(map)  
        // Marker clustering
            const markers = L.markerClusterGroup().addLayer(lightData);
            map.addLayer(markers);
        })

    // Icon
    const geojsonMarkerIcon = {
        radius: 8,
        fillColor: "red",
        color: "white",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8,
    };

    // Hospital Icon
    const hospitalIcon = L.icon({
        iconUrl: '/media/base/hospital-icon.png',
        //shadowUrl: '/media/base/hospital-icon.png',
        iconSize:     [50, 35], // size of the icon
        shadowSize:   [50, 35], // size of the shadow
        // iconAnchor:   [0, 0], // point of the icon which will correspond to marker's location
        // shadowAnchor: [0, 0],  // the same for the shadow
        // popupAnchor:  [0, 0] // point from which the popup should open relative to the iconAnchor
    });
    </script>